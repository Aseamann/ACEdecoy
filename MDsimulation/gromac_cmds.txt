Initialize: (Your's may be different)
source /usr/local/gromacs/bin/GMXRC

DSSP: (Your's may be different)
export DSSP=/usr/bin/dssp

Replace "your_file" in the commands below

Commands:
gmx pdb2gmx -f your_file.pdb -o your_file_processed.gro -water spce
- “15” “enter”
- 15 - OPLS-AA/L all-atom force field (2001 amino acid dihedrals)
- Created - “your_file_processed.gro”, “poser.itp”, and “topol.top”

gmx editconf -f your_file_processed.gro -o your_file_newbox.gro -c -d 1.0 -bt cubic
- Centers the protein in the box

gmx solvate -cp your_file_newbox.gro -cs spc216.gro -o your_file_solv.gro -p topol.top
- Fill box with water

GATHER ION FILE
wget http://www.mdtutorials.com/gmx/lysozyme/Files/ions.mdp

gmx grompp -f ions.mdp -c your_file_solv.gro -p topol.top -o ions.tpr
- Generate “ions.tpr” file

gmx genion -s ions.tpr -o your_file_solv_ions.gro -p topol.top -pname NA -nname CL -neutral
- “13” “enter”
- 13 - SOL

GATHER Parameter file
wget http://www.mdtutorials.com/gmx/lysozyme/Files/minim.mdp

gmx grompp -f minim.mdp -c your_file_solv_ions.gro -p topol.top -o em.tpr
- Assemble binary input

gmx mdrun -v -deffnm em
- Carry out energy mim.
- Potential Energy is negative = good
    - And in the right magnitude 10^5-10^6
- Maximum force in good range
    - Don’t exceed 1000 kJ/mol*nm

gmx energy -f em.edr -o potential.xvg
- Type “10 0”

EQUILBRATION

GATHER .mbp file
wget http://www.mdtutorials.com/gmx/lysozyme/Files/nvt.mdp

Temp:
gmx grompp -f nvt.mdp -c em.gro -r em.gro -p topol.top -o nvt.tpr

gmx mdrun -deffnm nvt
- Uses CPU with tMPI

More analysis:
gmx energy -f nvt.edr -o temperature.xvg
- Type: “16 0”

Pressure:
GATHER .mbp file
wget http://www.mdtutorials.com/gmx/lysozyme/Files/npt.mdp

gmx grompp -f npt.mdp -c nvt.gro -r nvt.gro -t nvt.cpt -p topol.top -o npt.tpr

gmx mdrun -deffnm npt

More analysis:
gmx energy -f npt.edr -o pressure.xvg
- Type: “18 0”

gmx energy -f npt.edr -o density.xvg
- Type: “24 0”

PRODUCTION MD

wget http://www.mdtutorials.com/gmx/lysozyme/Files/md.mdp
	- Confirm the details in this file with your preferred text editor. Can adjust this file to run MDs longer than 10ns

vim md.mdp
- To exit, type ":q!" Or ":x"

gmx grompp -f md.mdp -c npt.gro -t npt.cpt -p topol.top -o md_0_1.tpr


gmx mdrun -deffnm md_0_1 (-nb gpu - for gpu support)
	
	- To get progress updates on run: tail -f md_0_1.log

POST PROCESSESING

gmx trjconv -s md_0_1.tpr -f md_0_1.xtc -o md_0_1_noPBC.xtc -pbc nojump -center
	- Account for “broken” or “jumping”
	- Type (“1” for protein then “0” for system)

Calculate RMS

gmx rms -s md_0_1.tpr -f md_0_1_noPBC.xtc -o rmsd.xvg -tu ns
	- Type (“4” for backbone for both prompts)
	- Output: rmsd.nvg
	- Equilibrated reference

# Make sure to be using it out of copmplex
gmx rms -s em.tpr -f md_0_1_noPBC.xtc -o rmsd_xtal.xvg -tu ns
	- Same “4” then “4”
	- output: rmsd_xtal.xvg
	- Crystal reference

Calculate Radius of gyration

gmx gyrate -s md_0_1.tpr -f md_0_1_noPBC.xtc -o gyrate.xvg
	- Type “1” for protein

DSSP:

# Point to dssp
export DSSP=/usr/bin/dssp


# DSSP options 
gmx do_dssp -h
gmx do_dssp -f md_0_1.xtc -s md_0_1.tpr -sc scount.xvg -o ss.xpm -dt 10 -sss H
Enter: 5
----Other: -tu ns, -dt 1

# Convert to eps
gmx xpm2ps -f helix_ss.xpm -o helix_ss.eps -by 20 -bx 20

xmgrace -nxy scount.xvg


When Dealing with complex and need to split apart chains
gmx make_ndx -f md_0_1.gro -o index.ndx
	or gmx make_ndx -f your_file_processed.gro -o index.ndx (BAD ONE)
Type: splitch 1
Select what chain
Type: q

gmx trjconv -f md_0_1.xtc -s md_0_1.tpr -n index.ndx -o chain2_traj.xtc
Enter: 19 or 18 (or whatever chain you're attempting)

gmx convert-tpr -s md_0_1.tpr -n index.ndx -o md_chain2.tpr
Enter: 19 (or whatever chain you're attempting)

gmx trjconv -s md_chain2.tpr -f chain2_traj.xtc -o chain2_traj_noPBC.xtc -pbc nojump -center
Enter: 1 then 0

gmx do_dssp -f chain2_traj_noPBC.xtc -s md_chain2.tpr -sc scount_chain2.xvg -o ss_chain2.xpm -dt 10 -sss H
Enter: 5

gmx rms -s md_chain2.tpr -f chain2_traj_noPBC.xtc -o rmsd_xtal_chain2.xvg -tu ns
	- "4" then "4"



TOO PULL PDBS
gmx trjconv -s md_chain2.tpr -f chain2_traj_noPBC.xtc -dt 100 -o trj.pdb
Type: 1
